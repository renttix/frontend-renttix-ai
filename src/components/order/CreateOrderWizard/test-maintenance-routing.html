<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maintenance Routing Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .step {
            background: white;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .step-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        .step-number {
            width: 32px;
            height: 32px;
            background: #3B82F6;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 12px;
        }
        .product-card {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }
        .maintenance-config {
            background: #f9fafb;
            border-radius: 6px;
            padding: 16px;
            margin-top: 12px;
        }
        .route-assignment {
            background: #f0f9ff;
            border: 1px solid #3B82F6;
            border-radius: 6px;
            padding: 12px;
            margin-top: 12px;
        }
        .route-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }
        .route-badge.automatic {
            background: #d1fae5;
            color: #065f46;
        }
        .route-badge.manual {
            background: #fed7aa;
            color: #92400e;
        }
        .route-badge.floating {
            background: #fef3c7;
            color: #92400e;
        }
        .form-group {
            margin-bottom: 16px;
        }
        label {
            display: block;
            font-weight: 500;
            margin-bottom: 4px;
            font-size: 14px;
        }
        input, select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
        }
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }
        .button {
            padding: 8px 16px;
            border-radius: 6px;
            border: none;
            font-weight: 500;
            cursor: pointer;
            font-size: 14px;
        }
        .button-primary {
            background: #3B82F6;
            color: white;
        }
        .button-secondary {
            background: white;
            border: 1px solid #d1d5db;
            color: #374151;
        }
        .route-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 12px;
        }
        .route-option {
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .route-option:hover {
            border-color: #3B82F6;
            background: #f0f9ff;
        }
        .route-option.selected {
            border-color: #3B82F6;
            background: #eff6ff;
        }
        .info-box {
            background: #f3f4f6;
            border-left: 4px solid #3B82F6;
            padding: 12px;
            margin: 16px 0;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Maintenance Routing Test Flow</h1>
        
        <!-- Step 3: Delivery Details -->
        <div class="step">
            <div class="step-header">
                <div class="step-number">3</div>
                <h2>Delivery Details</h2>
            </div>
            
            <div class="form-group">
                <label>Delivery Address</label>
                <input type="text" value="123 High Street, Birmingham B1 2AA" readonly>
            </div>
            
            <div class="info-box">
                <strong>üìç Location Verified</strong><br>
                Coordinates: 52.4862, -1.8904<br>
                This address has been geocoded and will be used for route matching.
            </div>
        </div>
        
        <!-- Step 4: Product Selection with Maintenance -->
        <div class="step">
            <div class="step-header">
                <div class="step-number">4</div>
                <h2>Product Selection & Maintenance Configuration</h2>
            </div>
            
            <!-- Product 1: Portable Toilet -->
            <div class="product-card">
                <h3>üöΩ Portable Toilet - Standard Unit</h3>
                <p>SKU: PT-001 | Daily Rate: ¬£15.00</p>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="maintenance-1" checked>
                    <label for="maintenance-1">Requires Ongoing Maintenance?</label>
                </div>
                
                <div class="maintenance-config">
                    <div class="form-group">
                        <label>First Service Date</label>
                        <input type="date" value="2025-01-14">
                    </div>
                    
                    <div class="form-group">
                        <label>Frequency</label>
                        <select>
                            <option>Daily</option>
                            <option selected>Weekly</option>
                            <option>Every X Days</option>
                            <option>One-Off Maintenance</option>
                        </select>
                    </div>
                    
                    <div class="route-assignment">
                        <h4>üìç Route Assignment</h4>
                        <div class="route-badge automatic">
                            <span>‚úÖ</span>
                            Birmingham North Route
                        </div>
                        <p style="margin: 8px 0 0; font-size: 14px; color: #6b7280;">
                            Auto-assigned based on delivery to B1 2AA
                        </p>
                        <button class="button button-secondary" style="margin-top: 8px;">Change Route</button>
                    </div>
                    
                    <div class="checkbox-group" style="margin-top: 12px;">
                        <input type="checkbox" id="repeat-1" checked>
                        <label for="repeat-1">Repeat Until Off-Hire?</label>
                    </div>
                </div>
            </div>
            
            <!-- Product 2: Generator -->
            <div class="product-card">
                <h3>‚ö° Generator - 20kVA</h3>
                <p>SKU: GEN-020 | Daily Rate: ¬£75.00</p>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="maintenance-2" checked>
                    <label for="maintenance-2">Requires Ongoing Maintenance?</label>
                </div>
                
                <div class="maintenance-config">
                    <div class="form-group">
                        <label>First Service Date</label>
                        <input type="date" value="2025-02-07">
                    </div>
                    
                    <div class="form-group">
                        <label>Frequency</label>
                        <select>
                            <option>Daily</option>
                            <option>Weekly</option>
                            <option>Every X Days</option>
                            <option selected>Monthly</option>
                            <option>One-Off Maintenance</option>
                        </select>
                    </div>
                    
                    <div class="route-assignment">
                        <h4>üìç Route Assignment</h4>
                        <div class="route-badge manual">
                            <span>üîÑ</span>
                            Birmingham South Route
                        </div>
                        <p style="margin: 8px 0 0; font-size: 14px; color: #6b7280;">
                            Manually assigned<br>
                            <em>Reason: Customer prefers specific technician from South route</em>
                        </p>
                        <button class="button button-secondary" style="margin-top: 8px;">Change Route</button>
                    </div>
                </div>
            </div>
            
            <!-- Product 3: Pump (Floating) -->
            <div class="product-card">
                <h3>üíß Water Pump - Submersible</h3>
                <p>SKU: WP-SUB-01 | Daily Rate: ¬£45.00</p>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="maintenance-3" checked>
                    <label for="maintenance-3">Requires Ongoing Maintenance?</label>
                </div>
                
                <div class="maintenance-config">
                    <div class="form-group">
                        <label>First Service Date</label>
                        <input type="date" value="2025-01-21">
                    </div>
                    
                    <div class="form-group">
                        <label>Frequency</label>
                        <input type="number" value="14" style="width: 80px; display: inline-block;">
                        <span> days</span>
                    </div>
                    
                    <div class="route-assignment">
                        <h4>üìç Route Assignment</h4>
                        <div class="route-badge floating">
                            <span>‚ö°</span>
                            Floating Route
                        </div>
                        <p style="margin: 8px 0 0; font-size: 14px; color: #6b7280;">
                            To be scheduled manually<br>
                            <em>Reason: Specialized equipment requires specific technician</em>
                        </p>
                        <button class="button button-secondary" style="margin-top: 8px;">Assign Route</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Route Change Dialog Mock -->
        <div class="step">
            <h3>Route Change Dialog (Example)</h3>
            
            <div class="info-box">
                Current Assignment: Birmingham North Route (Automatic)
            </div>
            
            <label>Available Routes:</label>
            <div class="route-options">
                <div class="route-option selected">
                    <strong>Birmingham North Route</strong> <span style="color: #10B981;">‚úÖ In Area</span><br>
                    <small>Covers B1, B2, B3 postcodes</small>
                </div>
                <div class="route-option">
                    <strong>Birmingham South Route</strong> <span style="color: #6b7280;">üìç 5.2 km away</span><br>
                    <small>Covers B13, B14, B28 postcodes</small>
                </div>
                <div class="route-option">
                    <strong>Central Birmingham Route</strong> <span style="color: #6b7280;">üìç 7.8 km away</span><br>
                    <small>Covers B4, B5, B7 postcodes</small>
                </div>
                <div class="route-option">
                    <strong>‚ö° Floating Route</strong> <span style="color: #F59E0B;">Manual Scheduling</span><br>
                    <small>For manual scheduling or when no route matches</small>
                </div>
            </div>
            
            <div class="form-group" style="margin-top: 16px;">
                <label>Reason for Override:</label>
                <textarea rows="3" placeholder="Please provide a reason..."></textarea>
            </div>
            
            <div style="margin-top: 16px; display: flex; gap: 8px; justify-content: flex-end;">
                <button class="button button-secondary">Cancel</button>
                <button class="button button-primary">Confirm</button>
            </div>
        </div>
        
        <!-- Summary -->
        <div class="step">
            <h3>Implementation Summary</h3>
            
            <h4>‚úÖ Key Features Demonstrated:</h4>
            <ul>
                <li><strong>Delivery Address First:</strong> Captured in step 3 before product selection</li>
                <li><strong>Per-Product Maintenance:</strong> Each product has its own maintenance configuration</li>
                <li><strong>Route Assignment Types:</strong>
                    <ul>
                        <li>Automatic (green) - Based on geofencing</li>
                        <li>Manual (orange) - User override with reason</li>
                        <li>Floating (yellow) - For manual scheduling</li>
                    </ul>
                </li>
                <li><strong>Flexible Frequencies:</strong> Daily, Weekly, Custom intervals, Monthly, One-off</li>
                <li><strong>Route Suggestions:</strong> Shows distance for out-of-area routes</li>
                <li><strong>Override Tracking:</strong> Requires reason for manual changes</li>
            </ul>
            
            <h4>üîÑ Workflow:</h4>
            <ol>
                <li>User enters delivery address (Step 3)</li>
                <li>System geocodes address and stores coordinates</li>
                <li>User selects products and enables maintenance (Step 4)</li>
                <li>System auto-assigns routes based on delivery location</li>
                <li>User can override with manual selection if needed</li>
                <li>Floating tasks created for unassigned maintenance</li>
            </ol>
        </div>
    </div>
</body>
</html>